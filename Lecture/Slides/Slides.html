<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Random graphs</title>
    <meta charset="utf-8" />
    <meta name="author" content="David Garcia, Petar Jerčić, Jana Lasser    TU Graz" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="libs/footer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Random graphs
### David Garcia, Petar Jerčić, Jana Lasser <br><br> <em>TU Graz</em>
### Computational Modelling of Social Systems

---






layout: true

&lt;div class="my-footer"&gt;&lt;span&gt;David Garcia - Computational Modelling of Social Systems&lt;/span&gt;&lt;/div&gt; 

---

# So far

**Block 1: Fundamentals of agent-based modelling**
  
- Basics of agent-based modelling: the micro-macro gap
- Modelling segregation: Schelling's model
- Modelling cultures

**Block 2: Opinion dynamics**
- Basics of spreading: Granovetter's threshold model
 - Exercise 1: Schelling's model and Pandas (session 2)
- **Today: Opinion dynamics**
  - Exercise 2: Threshold models (session 1)
- Modelling hyperpolarization and cognitive balance: Guest lecture by Simon Schweighofer (Webex)
  - Exercise 2: Threshold models (session 2) **Deadline: 20.04.2022**

---

# Overview

## 1. Random graphs

## 2. Poisson random graphs

## 3. Giant component

## 4. Null models

---

# Random graphs

## *1. Random graphs*

## 2. Poisson random graphs

## 3. Giant component

## 4. Null models

---

# Random graphs

- **Networks** that posses a particular property
  - Which are otherwise random (e.g., fixed degree distribution)

- **Analysis** performed by comparing (two) different model network structures
  - E.g., non scale-free networks vs. scale-free networks
  - Degree distribution: power law

&lt;img src="Figures/scale-free_network.png" width="450" style="display: block; margin: auto;" /&gt;

---

# Random graphs

- **Measurements** of network data for (two) different structures
  - Mathematically
  - Computationally
  - **Statistically**

- **Behavior** of such mathematical models of (two) different network structures
  - E.g. Dynamic processes on networks

---

# Network dynamics and power law

- Dynamic processes on a network
  - Interaction between nodes in a social connected network
  - E.g., consensus, opinion formation models
  
.pull-left[
&lt;img src="Figures/power_law.png" width="400" style="display: block; margin: auto;" /&gt;
]

.pull-right[
- Power laws upper bound exponential tails for large enough `\(d\)`
  - Erdos-Renyi’s large newtwork (Poisson) degree distribution exhibits a sharp cutoff
  - Source: Network Science Analytics - Degrees, Power Laws and Popularity - Mateos 2020
]
 
---

# Random graph ensamble

.pull-left[
&lt;img src="Figures/random_network_graph1.png" width="900" style="display: block; margin: auto;" /&gt;
]

.pull-right[
- Consider a **simple graph** with the following fixed parameters:
  - Number of vertices (n)
  - Number of edges (m)


- For such **Random graph G(n,m)** created in the following method:
  - Place edge (m) between (uniformly) random chosen pair
  - Prevent multiedge/self-edge by:
  - Distinct pairing
  - Only to already not connected vertices
]

---

# Random graph ensamble

.pull-left[
- There is not one but an ensamble of networks that satisfy the fixed constraints
  - E.g., for n=20 and m=22

- Probability of such networks `\(P(G)\)`
  - `\(P(G)=\frac{1}{\omega}\)` , for such networks where `\(\omega\)` is the number of such networks
  - `\(P(G)=0\)` , for all other networks
]

.pull-right[
&lt;img src="Figures/random_network_graph2.png" width="900" style="display: block; margin: auto;" /&gt;
]

---

# Random graph ensamble

- Segregated components are also possible

&lt;img src="Figures/random_network_graph3.png" width="450" style="display: block; margin: auto;" /&gt;

---

# Simple graph

&lt;img src="Figures/simple_graph.svg" width="900" style="display: block; margin: auto;" /&gt;

---

# Random graph ensamble

- Ensable have *typical* behavior based on **properties (averages)**
  - Diameter: `\(\langle l \rangle = \sum_{G} P(G)l(G) = \frac{1}{\omega} \sum_{G} l(G)\)`
  - Number of edges: `\(\langle m \rangle\)`
  - Degree: `\(\langle k \rangle = 2 \frac{m}{n}\)`

- Special cases on the spectrum of probability distributions are not important
  - E.g., large/small dimeter `\(l\)`
  - These are not *typical* networks
  - For large `\(n\)` vertices properties averages tend to concentrate at the ensable averages

- Such **typical networks** can be analysed analytically

---

# Two interesting random graph ensambles

.pull-left[
1. G(n,m) - given/fixed number of edges `\(m\)`
2. G(n,p) - given/fixed probability of edges `\(p(m)\)`
  - The edges `\(m\)` are not-fixed
  - The vertices `\(n\)` are fixed
  
- E.g., Erdos - Renyi model
]

.pull-right[
&lt;img src="Figures/erdos_renyi.png" width="450" style="display: block; margin: auto;" /&gt;
]

---

# G(n,p) ensamble

- Probability of such G(n,p) networks `\(P(G)\)`:
  - `\(P(G) = p^m(1-p)^{(\frac{n}{2})-m}\)` , for such networks
  - `\(P(G)=0\)` , for non-simple graphs

.pull-left[
- p = 0.1

&lt;img src="Figures/g_n_p_0_1.png" width="300" style="display: block; margin: auto;" /&gt;
]
.pull-right[
- p = 0.05

&lt;img src="Figures/g_n_p_0_0_5.png" width="300" style="display: block; margin: auto;" /&gt;
]

---

# Analytical behavior analysis of G(n,p) ensamble

- Mean number of edges `\(\langle m \rangle\)`
  - **Distinct vertex pairs** `\(\binom{n}{2}\)` * probability of an edge `\(p\)`;

`$$\langle m \rangle = \binom{n}{2} p$$`
- Mean degree of vertex `\(\langle k \rangle\)` also as `\(c\)`
  - Number of other vertices `\((n-1)\)` * probability of an edge `\(p\)`

`$$\langle k \rangle = (n-1)p$$`

---

- Degree distribution `\(p_{k}\)` (for a vertex connected with `\(k\)` others)
  - **Distinct vertex pairs** `\(\binom{n-1}{k}\)` * probability of connection with `\(k\)` vertices, but not with others

`$$p_{k} = \binom{n-1}{k}p^{k}(1-p)^{n-1-k}$$`

---

# Example G(n,p) ensamble

.pull-left[
- `\(n = 20, p = 0.1 = C\)`
- `\(\langle m \rangle = 190 * 0.1 = 19\)`
- `\(\langle k \rangle = (20-1) * 0.1 = 1.9\)`
- `\(p_{3} = 969 * 0.001 * 0.185 = 0.18\)`
&lt;img src="Figures/g_n_p_0_1.png" width="300" style="display: block; margin: auto;" /&gt;
]
.pull-right[
- `\(n=20, p = 0.05 = C\)`
- `\(\langle m \rangle = 190 * 0.05 = 9.5\)`
- `\(\langle k \rangle = (20-1) * 0.05 = 0.95\)`
- `\(p_{3} = 969 * 0.000125 * 0.44 = 0.05\)`
&lt;img src="Figures/g_n_p_0_0_5.png" width="300" style="display: block; margin: auto;" /&gt;
]

---

# Binomial distribution

- Binomial distribution with parameters `\(n\)` and `\(p\)`
  - The discrete probability distribution of the number of successes in a sequence of n independent experiments
  - Each experiment asking a yes–no question
  - Each with its own Boolean-valued outcome
  - Success (with probability p)
  - Failure (with probability q = 1 − p)

- Used to model the number of successes in a sample of size `\(n\)` drawn with replacement from a population of size `\(N\)`.

---

# Poisson random graphs

## 1. Random graphs

## *2. Poisson random graphs*

## 3. Giant component

## 4. Null models

---

# Poisson random graph

- Special case of G(n,p) ensamble for large networks `\(n\rightarrow\infty\)`

- Mean degree `\(c\)` - constant over large networks
  - Number of friends does not depend on the number of people in the world
  
`$$c = (n-1)p \Rightarrow p = \frac{c}{n-1} , n\rightarrow\infty$$`
  - Vanishingly small probability `\(p\)` of an edge
    
- Degree distribution (for a vertex) `\(p_k\)`

`$$p_{k} = e^{-c} \frac{c^{k}}{k!}, n\rightarrow\infty$$`

---

# The function asymptotically approaches some value

&lt;img src="Figures/asym_limit.png" width="500" style="display: block; margin: auto;" /&gt;

- Asymptotically equal-to/approaches some value
  - The function approaches a particular finite value
  - Horizontal asymptotes are defined as limits at infinity

---

# Analytical behavor analysis of G(n,p) ensamble

- Clusering coefficient `\(C\)`
  - Transitive behavior (property) in a network
   - What is the probability that two vertex neighbours are also neighbous of each other?

`$$C = \frac{c}{n-1}$$`
- Poisson random graphs for large networks
  - Clustering coefficient `\(C \simeq 0 , n\rightarrow\infty\)`, if mean degree `\(c\)` is fixed
  - Difference between the RNG and real-world networks: real-world networks have high clustering coefficient `\(C\)`

---

# Example Poisson vs. real-world network

.pull-left[
&lt;img src="Figures/poisson.png" width="600" style="display: block; margin: auto;" /&gt;
]
.pull-right[
&lt;img src="Figures/grid_network.png" width="600" style="display: block; margin: auto;" /&gt;
]

---

# Giant component

## 1. Random graphs

## 2. Poisson random graphs

## 3. *Giant component*

## 4. Null models

---

# Largest component for large networks `\(n\rightarrow\infty\)`

- If `\(p = 0\)`; independent of size `\(n\)`
  - Disconnected network
  - `\(n\)` separate components - vertices isolated
- If `\(p = 1\)`; dependent of size `\(n\)`
  - 1-single component
  - Each vertex is connected to each other
  - **Giant component**
- Most networks (should) have a large component that fills the network (to be able to perform the intended role)
  - e.g., Internet connected component (infrastructure)

---

# Sensitivity of parameter `\(p[0,1]\)` vs. largest component
- How the size to the largest component changes in respect to `\(p\)`?
  - Expected: The size increases gradually and it is **extensive** around `\(p = 1\)`
  - Reality: Largest component suddenly changes for one particular value of `\(p\)`
  - **Phase transition**

---

# Analytical behavor analysis of G(n,p) ensamble for large networks `\(n\rightarrow\infty\)`

.pull-left[
&lt;img src="Figures/size_giant_component.png" width="450" style="display: block; margin: auto;" /&gt;
]

.pull-right[
1. Size `\(S=0\)`; small `\(c\)` - no giant component

2. Size `\(S=0\)` and `\(S&gt;0\)` ; large c - there is giant component
  - Transition phase happendes in between small/large `\(c\)`, where gradient of the diagonal matches the gradient of the curve for `\(S=0\)`
]

---

#Size of the giant component

.pull-left[
&lt;img src="Figures/size_gianct_component_over_degree_distribution.png" width="600" style="display: block; margin: auto;" /&gt;
]

.pull-right[
- Size of the giant component for `\(c&gt;1\)` is larger than one of the possible solutions `\(S=0\)`
  - This is illustrated on the figure for all values of `\(c\)`, with a limit at `\(c=1\)` for two given cases
  - Phase transition
]

---

# Phase transition examples

.pull-left[
- Schelling
&lt;img src="Figures/IvsF.png" width="750" style="display: block; margin: auto;" /&gt;
]

.pull-right[
- Granovetter
&lt;img src="Figures/STD.png" width="750" style="display: block; margin: auto;" /&gt;
]

---

# Null models

## 1. Random graphs

## 2. Poisson random graphs

## 3. Giant component

## 4. *Null models*

---

# Random graphs as null models

- Most real-world networks show an average distance which is comparable to that of the corresponding random graph
  - But their average clustering coefficient is much higher

- Exploratory data analysis
  - Given the **observed** value of a structural measure in a real-world network it can be compared with the **expected** value of that measure in a graph in which the network’s structure is randomized
  - Any structure is tested whether it deviates from the structure of some pre-defined model

---

# Random graphs as null models

- In terms of statistics, the null-hypothesis assumes that graph `\(\mathcal{G}\)` was produced by the random graph model
  - This null-hypothesis is rejected if it is very unlikely that the model is true
  - The random graph model is also often called **the null model** 
  
- The **p-value** `\(P(G|\mathcal{G})\)` itself, i.e., the probability that the observed graph `\(G\)` was produced by some random graph model `\(\mathcal{G}\)`, does not directly give you the probability `\(P(\mathcal{G}|G)\)`, i.e., the probability that the model is true when `\(G\)` is observed
  - **Strawmen argument**
  
---

# Social network example

.pull-left[
&lt;img src="Figures/null_model.jpg" width="600" style="display: block; margin: auto;" /&gt;
]
- Increasing complexity, cliquishness and gender segregation with age
  - Filled squares, girls; open circles, boys.

- It is well known that, in general, same-gender friendships are more likely than boy-girl friendships
  - Especially in primary school. 

---

# Social network example

- Conlan et al. compared the number of these edges with the expected one in a model where each child maintains the number of declared and received friendship declarations with respect to the gender of the other child
  - The mutuality is still statistically significant in almost all cases
  - The effect is less pronounced than if compared with a simple directed random graph in which the gender is not regarded. 
  
- *Note that this can be modeled structurally by defining two different indegrees and two different outdegrees, each differentiated by the gender of the other child. The random graph model then maintains both types of in- and outdegrees.*

---

# Hypothesis testing

- In conducting any statistical test there are two hypotheses being considered
  1. The hypothesis that the researcher is really interested in is called the alternative (or sometimes the "experimental") hypothesis (or H1)
  2. The other is called the null hypothesis (or H0)
  - The null hypothesis is a kind of "strawman"; it's a hypothesis that we want to disprove
- The reason for all this is that the great scientific philosophers (like Karl Popper) argue that we cannot logically prove something to be true, we can only disprove it (we create hypotheses that are falsifiable)

---

# Hypothesis testing example

  -  When we compare two group means, for instance, the null hypothesis states that they are equal to one another. The alternative then is that they are unequal, and if we wind up disproving or rejecting the null hypothesis, that is what we will conclude
  
- E.g., the null hypothesis would state that the a particular sample average is not significantly different from the population value
  - It is different only due to chance factors. In other words, the sample mean is not really any different from the population mean once we take into account sampling variability
  - If the null is not true, we accept the alternative hypothesis, that the sample mean is not equal to the population mean

- To "accept" the alternative hypothesis. Technically, we can't prove that it is true, so we just retain it until it is proven wrong

---

# Strawmen arguemnt example

- The **p-value** `\(P(G|\mathcal{G})\)` itself, i.e., the probability that the observed graph `\(G\)` was produced by some random graph model `\(\mathcal{G}\)`, does not directly give you the probability `\(P(\mathcal{G}|G)\)`, i.e., the probability that the model is true when `\(G\)` is observed

- The problem is that the two conditional probabilities assume different reference groups and so they don’t even address the same research question.
  - A researcher cannot use the probability of a person being Catholic given that he’s the Pope to answer the question of whether someone is the Pope given that he’s Catholic
  - Another example of this fallacy is to suggest that because many terrorists have backgrounds in engineering, engineers are more likely to be terrorists
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="libs/perc.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
